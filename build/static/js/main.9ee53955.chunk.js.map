{"version":3,"sources":["Axis.js","Legend.js","SubGraph.js","KanagawaMap.js","OverallGraph.js","App.js","index.js"],"names":["VerricalAxis","scale","strokeColor","range","y1","y2","x1","x2","stroke","strokeWidth","transform","x","y","textAnchor","dominantBaseline","fontSize","ticks","map","i","fill","VerricalHouseAxis","HorizontalAxis","Legend","type","domain","item","r","SubGraph","target","colorScale","useState","eachKanagawaData","setEachKanagawaData","margin","svgWidth","svgHeight","useEffect","a","fetch","response","json","fetchData","length","style","width","height","border","targetData","find","name","startI","graphData","population","filter","year","Object","keys","xScale","d3","nice","yScalePopulation","viewBox","preData","cx","cy","KanagawaMap","props","data","setData","clickedArea","setClickedArea","mouseEnterHandle","e","currentTarget","dataset","then","topoSaitama","geoSaitama","topojson","objects","kanagawa","geoSaitamacp","JSON","parse","stringify","features","arrChanged","divideArray","properties","N03_007","tmpArray","push","aProjection","center","translate","kanagawaWidth","kanagawaHeight","geoPath","projection","pathes","N03_004","path","onClick","d","OverallGraph","mapData","setMapData","yScaleHousehold","sizeOfHousehold","id","Main","Header","class","Footer","App","render","document","querySelector"],"mappings":"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","file":"static/js/main.9ee53955.chunk.js","sourcesContent":["export function VerricalAxis({ scale }) {\r\n  const strokeColor = \"#888\";\r\n  const x = 0;\r\n  const [y1, y2] = scale.range();\r\n\r\n  return (\r\n    <g>\r\n      <line\r\n        x1={x}\r\n        y1={y1}\r\n        x2={x}\r\n        y2={y2 + 2}\r\n        stroke={strokeColor}\r\n        strokeWidth=\"2\"\r\n      ></line>\r\n      <g>\r\n        <g transform=\"translate(-80, 200) rotate(-90)\">\r\n          <text\r\n            x=\"0\"\r\n            y=\"0\"\r\n            textAnchor=\"end\"\r\n            dominantBaseline=\"central\"\r\n            fontSize=\"15\"\r\n          >\r\n            人口\r\n          </text>\r\n        </g>\r\n\r\n        {scale.ticks().map((y, i) => {\r\n          return (\r\n            <g key={i} transform={`translate(0, ${scale(y)})`}>\r\n              <line x1=\"0\" y1=\"0\" x2=\"5\" y2=\"0\" stroke={strokeColor}></line>\r\n              <text\r\n                x=\"-8\"\r\n                y=\"0\"\r\n                textAnchor=\"end\"\r\n                dominantBaseline=\"central\"\r\n                fill=\"black\"\r\n                fontSize=\"12\"\r\n              >\r\n                {y}\r\n              </text>\r\n            </g>\r\n          );\r\n        })}\r\n      </g>\r\n    </g>\r\n  );\r\n}\r\n\r\nexport function VerricalHouseAxis({ scale }) {\r\n  const strokeColor = \"#888\";\r\n  const x = 500;\r\n  const [y1, y2] = scale.range();\r\n\r\n  return (\r\n    <g>\r\n      <line\r\n        x1={x}\r\n        y1={y1}\r\n        x2={x}\r\n        y2={y2 + 2}\r\n        stroke={strokeColor}\r\n        strokeWidth=\"2\"\r\n      ></line>\r\n      <g>\r\n        <g transform={`translate(${x}, 200) rotate(-90)`}>\r\n          <text\r\n            x=\"30\"\r\n            y=\"60\"\r\n            textAnchor=\"end\"\r\n            dominantBaseline=\"central\"\r\n            fontSize=\"15\"\r\n          >\r\n            世帯平均人数\r\n          </text>\r\n        </g>\r\n\r\n        {scale.ticks().map((y, i) => {\r\n          return (\r\n            <g key={i} transform={`translate(${x}, ${scale(y)})`}>\r\n              <line x1=\"0\" y1=\"0\" x2=\"-5\" y2=\"0\" stroke={strokeColor}></line>\r\n              <text\r\n                x=\"30\"\r\n                y=\"0\"\r\n                textAnchor=\"end\"\r\n                dominantBaseline=\"central\"\r\n                fill=\"black\"\r\n                fontSize=\"12\"\r\n              >\r\n                {y}\r\n              </text>\r\n            </g>\r\n          );\r\n        })}\r\n      </g>\r\n    </g>\r\n  );\r\n}\r\n\r\nexport function HorizontalAxis({ scale }) {\r\n  const strokeColor = \"#888\";\r\n  const y = 350;\r\n\r\n  const [x1, x2] = scale.range();\r\n  return (\r\n    <g>\r\n      <line x1={x1} y1={y} x2={x2 + 5} y2={y} stroke={strokeColor}></line>\r\n      <g>\r\n        <g transform=\"translate(250, 380)\">\r\n          <text\r\n            x=\"0\"\r\n            y=\"0\"\r\n            textAnchor=\"end\"\r\n            dominantBaseline=\"central\"\r\n            fontSize=\"15\"\r\n          >\r\n            年\r\n          </text>\r\n        </g>\r\n\r\n        {scale.ticks().map((x, i) => {\r\n          return (\r\n            <g key={i} transform={`translate(${scale(x)}, 0)`}>\r\n              <line x1=\"0\" y1=\"395\" x2=\"0\" y2=\"400\" stroke={strokeColor}></line>\r\n              <text\r\n                x=\"0\"\r\n                y={y + 15}\r\n                textAnchor=\"middle\"\r\n                dominantBaseline=\"central\"\r\n                fontSize=\"12\"\r\n              >\r\n                {x}\r\n              </text>\r\n            </g>\r\n          );\r\n        })}\r\n      </g>\r\n    </g>\r\n  );\r\n}\r\n","function Legend({ scale, type }) {\r\n  const dx = type === \"main\" ? 150 : 150;\r\n  if (type === \"main\") {\r\n    return (\r\n      <g transform={`translate(${dx},0)`}>\r\n        {scale.domain().map((item, i) => {\r\n          return (\r\n            <g key={i} transform={`translate(400, ${20 + i * 15})`}>\r\n              <circle r=\"5\" fill={scale(item)} />\r\n              <text x=\"10\" fontSize=\"11\" dominantBaseline=\"central\">\r\n                {item}\r\n              </text>\r\n            </g>\r\n          );\r\n        })}\r\n      </g>\r\n    );\r\n  } else {\r\n    return (\r\n      <g transform={`translate(${dx},0)`}>\r\n        {scale.domain().map((item, i) => {\r\n          if (i === 1) {\r\n            return (\r\n              <g key={i} transform={`translate(400, ${20 + i * 15})`}>\r\n                <circle r=\"5\" fill={scale(item)} />\r\n                <text x=\"10\" fontSize=\"11\" dominantBaseline=\"central\">\r\n                  {item}\r\n                </text>\r\n              </g>\r\n            );\r\n          }\r\n        })}\r\n      </g>\r\n    );\r\n  }\r\n}\r\nexport default Legend;\r\n","import { useEffect, useState } from \"react\";\r\nimport { VerricalAxis, HorizontalAxis } from \"./Axis\";\r\nimport * as d3 from \"d3\";\r\nimport Legend from \"./Legend\";\r\n\r\nfunction SubGraph({ target, colorScale }) {\r\n  const [eachKanagawaData, setEachKanagawaData] = useState([]);\r\n  const margin = {\r\n    top: 10,\r\n    bottom: 50,\r\n    left: 100,\r\n    right: 180,\r\n  };\r\n  const contentWidth = 500;\r\n  const contentHeight = 350;\r\n  const svgWidth = margin.right + margin.left + contentWidth;\r\n  const svgHeight = margin.top + margin.bottom + contentHeight;\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const response = await fetch(\"kanagawa3.json\");\r\n      const fetchData = await response.json();\r\n      setEachKanagawaData(fetchData);\r\n    })();\r\n  }, []);\r\n  if (eachKanagawaData.length === 0 || target === null) {\r\n    return (\r\n      <div>\r\n        <h2>市区町村別のグラフ</h2>\r\n        <div\r\n          style={{\r\n            width: svgWidth,\r\n            height: svgHeight,\r\n            border: \"solid 2px\",\r\n          }}\r\n        ></div>\r\n      </div>\r\n    );\r\n  }\r\n  const targetData = eachKanagawaData.find((item) => item.name === target);\r\n\r\n  let startI = 1970;\r\n  const graphDataTmp = targetData.population.filter((item) => {\r\n    if (item[startI] !== null) {\r\n      startI += 5;\r\n      return true;\r\n    } else {\r\n      startI += 5;\r\n      return false;\r\n    }\r\n  });\r\n\r\n  const graphData = graphDataTmp.map((item) => {\r\n    const year = Object.keys(item)[0];\r\n    return {\r\n      year: year,\r\n      population: item[year],\r\n    };\r\n  });\r\n\r\n  const xScale = d3\r\n    .scaleLinear()\r\n    .domain(d3.extent(graphData, (item) => item.year))\r\n    .range([0, contentWidth])\r\n    .nice();\r\n  const yScalePopulation = d3\r\n    .scaleLinear()\r\n    .domain([0, d3.extent(graphData, (item) => item.population)[1]])\r\n    .range([contentHeight, 0]);\r\n  return (\r\n    <div>\r\n      <h2>市区町村別のグラフ : {target}</h2>\r\n      <div>\r\n        <svg\r\n          viewBox={`${-margin.left} ${-margin.top} ${svgWidth} ${svgHeight}`}\r\n          width={svgWidth}\r\n          height={svgHeight}\r\n          style={{ border: \"solid 2px\" }}\r\n        >\r\n          <Legend scale={colorScale} type=\"sub\" />\r\n          <VerricalAxis scale={yScalePopulation} />\r\n          <HorizontalAxis scale={xScale} />\r\n\r\n          <g>\r\n            {graphData.map((item, i) => {\r\n              const preData = i > 0 ? graphData[i - 1] : null;\r\n              if (i > 0) {\r\n                return (\r\n                  <line\r\n                    key={i}\r\n                    x1={xScale(preData[\"year\"])}\r\n                    y1={yScalePopulation(preData[\"population\"])}\r\n                    x2={xScale(item[\"year\"])}\r\n                    y2={yScalePopulation(item[\"population\"])}\r\n                    stroke=\"black\"\r\n                  ></line>\r\n                );\r\n              }\r\n            })}\r\n          </g>\r\n          <g>\r\n            {graphData.map((item, i) => {\r\n              return (\r\n                <circle\r\n                  transform={`translate(${xScale(\r\n                    item[\"year\"]\r\n                  )},${yScalePopulation(item[\"population\"])})`}\r\n                  key={i}\r\n                  cx=\"0\"\r\n                  cy=\"0\"\r\n                  r=\"5\"\r\n                  fill={colorScale(\"人口\")}\r\n                />\r\n              );\r\n            })}\r\n          </g>\r\n        </svg>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default SubGraph;\r\n","import * as topojson from \"topojson\";\r\nimport * as d3 from \"d3\";\r\nimport { useEffect, useState } from \"react\";\r\nimport SubGraph from \"./SubGraph\";\r\nfunction KanagawaMap(props) {\r\n  const scale = 30000 * 0.7;\r\n  const colorScale = props.scale;\r\n  const [data, setData] = useState([]);\r\n  const [clickedArea, setClickedArea] = useState(null);\r\n  const margin = {\r\n    top: 10,\r\n    bottom: 10,\r\n    left: 50,\r\n    right: 100,\r\n  };\r\n  const contentWidth = 400;\r\n  const contentHeight = 300;\r\n  const svgWidth = margin.right + margin.left + contentWidth;\r\n  const svgHeight = margin.top + margin.bottom + contentHeight;\r\n  useEffect(() => {\r\n    d3.json(\"kanagawa.topojson\").then((topoSaitama) => {\r\n      const geoSaitama = topojson.feature(\r\n        topoSaitama,\r\n        topoSaitama.objects.kanagawa\r\n      ); //TopoJSON=>GeoJSO変換\r\n      const geoSaitamacp = JSON.parse(JSON.stringify(geoSaitama));\r\n      geoSaitamacp.features = [];\r\n\r\n      let i = 14101;\r\n      const arrChanged = [];\r\n      while (i <= 14402) {\r\n        const divideArray = geoSaitama.features.filter((item) => {\r\n          if (item.properties.N03_007 == i) {\r\n            return true;\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n        // 配列の中身が空でないか\r\n        if (divideArray.length > 0) {\r\n          const tmpArray = JSON.parse(JSON.stringify(geoSaitamacp));\r\n          tmpArray.features = divideArray;\r\n          arrChanged.push(tmpArray);\r\n        }\r\n        i++;\r\n      }\r\n\r\n      const east = 138.915833,\r\n        west = 139.796111,\r\n        north = 35.672778,\r\n        south = 35.128889;\r\n      const kanagawaWidth = contentWidth;\r\n      const kanagawaHeight = contentHeight;\r\n      const aProjection = d3\r\n        // 「緯度経度の点座標」を「svg上の点座標」に変換\r\n        .geoMercator()\r\n        .center([(west + east) / 2, (north + south) / 2])\r\n        .translate([kanagawaWidth / 2, kanagawaHeight / 2])\r\n        .scale(scale);\r\n      const geoPath = d3.geoPath().projection(aProjection);\r\n\r\n      const pathes = [];\r\n      arrChanged.map((item) => {\r\n        pathes.push({\r\n          name: item.features[0].properties.N03_004,\r\n          path: geoPath(item),\r\n        });\r\n      });\r\n      setData(pathes);\r\n    });\r\n  }, []);\r\n  // 神奈川県の地図がクリックされた時に発火\r\n  function mouseEnterHandle(e) {\r\n    setClickedArea(e.currentTarget.dataset.name);\r\n  }\r\n  if (data == 0) {\r\n    return <div>loading</div>;\r\n  }\r\n  return (\r\n    <div>\r\n      <div>\r\n        <SubGraph target={clickedArea} colorScale={colorScale} />\r\n      </div>\r\n      <div>\r\n        <svg\r\n          viewBox={`${-margin.left} ${-margin.top} ${svgWidth} ${svgHeight}`}\r\n          width={svgWidth}\r\n          height={svgHeight}\r\n          style={{ border: \"solid 2px\" }}\r\n        >\r\n          {data.map((item, i) => {\r\n            return (\r\n              <path\r\n                key={i}\r\n                onClick={mouseEnterHandle}\r\n                d={item.path}\r\n                data-name={item.name}\r\n                style={{\r\n                  stroke: \"black\",\r\n                  fill: clickedArea === item.name ? \"#aad5ff\" : \"white\",\r\n                  strokeWidth: \"1\",\r\n                }}\r\n              ></path>\r\n            );\r\n          })}\r\n        </svg>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default KanagawaMap;\r\n","import * as d3 from \"d3\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { VerricalAxis, VerricalHouseAxis, HorizontalAxis } from \"./Axis\";\r\nimport Legend from \"./Legend\";\r\n\r\nfunction OverallGraph(props) {\r\n  const colorScale = props.scale;\r\n  const [mapData, setMapData] = useState([]);\r\n  const margin = {\r\n    top: 10,\r\n    bottom: 50,\r\n    left: 100,\r\n    right: 180,\r\n  };\r\n  const contentWidth = 500;\r\n  const contentHeight = 350;\r\n  const svgWidth = margin.right + margin.left + contentWidth;\r\n  const svgHeight = margin.top + margin.bottom + contentHeight;\r\n  useEffect(() => {\r\n    (async () => {\r\n      const response = await fetch(\"kanagawa1.json\");\r\n      const fetchData = await response.json();\r\n      setMapData(fetchData);\r\n    })();\r\n  }, []);\r\n\r\n  if (mapData.length == 0) {\r\n    return <div>loading</div>;\r\n  }\r\n\r\n  // scalelinier:変数変換\r\n  const xScale = d3\r\n    .scaleLinear()\r\n    // dommain(a,b): 元の座標の最小、最大ヲ指定\r\n    // d3.extent(array):return : [array_min, array_max]\r\n    .domain(d3.extent(mapData, (item) => item[\"year\"]))\r\n    // range:出力の最大、最小値\r\n    .range([0, contentWidth])\r\n    .nice();\r\n  const yScaleHousehold = d3\r\n    .scaleLinear()\r\n    .domain([0, d3.extent(mapData, (item) => item[\"sizeOfHousehold\"])[1]])\r\n    .range([contentHeight, 0]);\r\n\r\n  const yScalePopulation = d3\r\n    .scaleLinear()\r\n    .domain([0, d3.extent(mapData, (item) => item[\"population\"])[1]])\r\n    .range([contentHeight, 0]);\r\n  return (\r\n    <div>\r\n      <h2>神奈川県全体のグラフ</h2>\r\n      <div>\r\n        <svg\r\n          viewBox={`${-margin.left} ${-margin.top} ${svgWidth} ${svgHeight}`}\r\n          width={svgWidth}\r\n          height={svgHeight}\r\n          style={{ border: \"solid 2px\" }}\r\n        >\r\n          <Legend scale={colorScale} type=\"main\" />\r\n          <VerricalAxis scale={yScalePopulation} />\r\n          <HorizontalAxis scale={xScale} />\r\n          <VerricalHouseAxis scale={yScaleHousehold} />\r\n          <g>\r\n            {mapData.map((item, i) => {\r\n              const preData = i > 0 ? mapData[i - 1] : null;\r\n              if (i > 0) {\r\n                return (\r\n                  <line\r\n                    key={item.id}\r\n                    x1={xScale(preData[\"year\"])}\r\n                    y1={yScaleHousehold(preData.sizeOfHousehold)}\r\n                    x2={xScale(item[\"year\"])}\r\n                    y2={yScaleHousehold(item.sizeOfHousehold)}\r\n                    stroke=\"black\"\r\n                  ></line>\r\n                );\r\n              }\r\n            })}\r\n          </g>\r\n          <g>\r\n            {mapData.map((item, i) => {\r\n              return (\r\n                <circle\r\n                  key={item.id}\r\n                  cx={xScale(item.year)}\r\n                  cy={yScaleHousehold(item.sizeOfHousehold)}\r\n                  r=\"5\"\r\n                  fill={colorScale(\"世帯平均人数\")}\r\n                ></circle>\r\n              );\r\n            })}\r\n          </g>\r\n          <g>\r\n            {mapData.map((item, i) => {\r\n              const preData = i > 0 ? mapData[i - 1] : null;\r\n              if (i > 0) {\r\n                return (\r\n                  <line\r\n                    key={item.id}\r\n                    x1={xScale(preData[\"year\"])}\r\n                    y1={yScalePopulation(preData[\"population\"])}\r\n                    x2={xScale(item[\"year\"])}\r\n                    y2={yScalePopulation(item[\"population\"])}\r\n                    stroke=\"black\"\r\n                  ></line>\r\n                );\r\n              }\r\n            })}\r\n          </g>\r\n          <g>\r\n            {mapData.map((item, i) => {\r\n              return (\r\n                <circle\r\n                  transform={`translate(${xScale(\r\n                    item[\"year\"]\r\n                  )},${yScalePopulation(item[\"population\"])})`}\r\n                  key={item.id}\r\n                  cx=\"0\"\r\n                  cy=\"0\"\r\n                  r=\"5\"\r\n                  fill={colorScale(\"人口\")}\r\n                />\r\n              );\r\n            })}\r\n          </g>\r\n        </svg>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default OverallGraph;\r\n","import * as d3 from \"d3\";\r\nimport KanagawaMap from \"./KanagawaMap\";\r\nimport OverallGraph from \"./OverallGraph\";\r\nimport \"bulma/css/bulma.css\";\r\nfunction App() {\r\n  return (\r\n    <div>\r\n      <Header />\r\n      <Main />\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Main() {\r\n  const colorScale = d3.scaleOrdinal(d3.schemeCategory10);\r\n  return (\r\n    <div>\r\n      <OverallGraph scale={colorScale} />\r\n      <KanagawaMap scale={colorScale} />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Header() {\r\n  return (\r\n    <header>\r\n      <div class=\"hero is-success\">\r\n        <div class=\"hero-body\">\r\n          <p class=\"title\">Kanagawa Visualizar</p>\r\n          <p class=\"subtitle\">Success subtitle</p>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\nfunction Footer() {\r\n  return (\r\n    <footer class=\"footer\">\r\n      <div class=\"content has-text-centered\">\r\n        <p>kanagawa visualizar</p>\r\n      </div>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { render } from \"react-dom\";\r\nimport App from \"./App\";\r\n\r\nrender(<App />, document.querySelector(\"#content\"));\r\n"],"sourceRoot":""}